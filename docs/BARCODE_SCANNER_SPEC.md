# バーコードスキャン機能 実装計画

## 目標
`Home` 画面の「スキャン」ボタンからカメラを起動し、バーコードを読み取って該当する商品情報と攻略法を表示できるようにする。

## 実装内容
### 1. スキャン画面 (`ScanScreen`) の作成 [NEW]
- `mobile_scanner` パッケージを使用したカメラ画面。
- 画面全体にカメラプレビューを表示。
- バーコードを検知したら、その値をパラメータとして結果画面へ遷移する（連続スキャン防止のため、一度検知したらカメラを止める/フラグを立てる）。
- 閉じるボタンなどをオーバーレイ表示。

### 2. 結果画面 (`ScanResultScreen`) の作成 [NEW]
- **パラメータ**: バーコードの値 (String)
- **ロジック**:
    - `MockStrategyRepository.fetchProductByBarcode` を呼び出す。
    - **検索中**: ローディング表示。
    - **見つかった場合**:
        - 商品画像、商品名を表示。
        - `fetchStrategiesByIds` で関連攻略法を取得し、リスト表示する。
    - **見つからなかった場合**:
        - 「未登録の商品です」と表示。
        - バーコード値を表示（デバッグ用）。
        - 「ホームに戻る」ボタン。

### 3. ホーム画面 (`HomeScreen`) の修正 [MODIFY]
- フローティングアクションボタンの `onPressed` に、`ScanScreen` への遷移処理を追加。

## ファイル構成案
```
lib/
  presentation/
    screens/
      scan_screen.dart        # [NEW] カメラ起動画面
      scan_result_screen.dart # [NEW] 結果表示画面
```

## 注意点
- iOSシミュレータではカメラが起動しないため、ダミーのバーコード入力手段（例: デバッグ用ボタン）を用意するか、シミュレータ用のフォールバックを検討する。
  - → 今回はシミュレータ環境であれば「ダミーバーコードを選択するダイアログ」を表示するなどの工夫を入れると開発しやすい。

## 検証プラン
1. **シミュレータ**: `ScanScreen` がエラーなく開くこと（カメラは黒画面等の可能性あり）。
2. **もし可能なら**: シミュレータ判定を入れて、ボタンタップですぐに結果画面へ遷移させるデバッグ機能を一時的に入れるか？
    - → 実機転送しないとカメラテストはできないが、画面遷移ロジックは確認したい。
    - **案**: `ScanScreen` に「デバッグ: 商品Aを見つける」ボタンを配置しておく。
